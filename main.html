<!DOCTYPE HTML>
<html>
	<head>
		<title>Login Form</title>
		<meta  name = "viewport" content = "initial-scale = 1.0, maximum-scale = 1.0, user-scalable = no">
		<link rel="STYLESHEET" type="text/css" href="libs/touchui.css">
		<script src="libs/touchui.js" type="text/javascript"></script>
		
		
	</head>
	<body>

	<script type="text/javascript" charset="utf-8">
	var source;


	dhx.ready(function(){
	
		source = new dhx.proxy({
			url: "http://mycustomerconnect.com/rsnew1/customers.php",
			storage: dhx.storage.local
		});
		
		dhx.ui({
            rows:[
					{ 	
						view:"toolbar", 
						type:"MainBar", 
						elements:[
							{view:"label", label: "RouteStar <sup class='tb_sup'>mobile</sup>", align:'center'},
							{view:"button", id:"button1", type:"prev", label: "Back", align:"right", inputWidth:100, click: "showCustomers();"}
						]
					},
					{
						view:"toolbar", 
						type:"SubBar", 
						elements:[
							{
							   id: "filter",
							   view: "text",
							   label: "<div class='dhx_el_icon'><div class='dhx_el_icon_search' style='margin: 5px 0'></div></div>",
							   labelWidth: 30
							}
						]
					},
                    {
						gravity:2,  
                        view:"multiview",
                        cells:[    
                                {
                                    id:"home",
                                    view:"dataview",
                                    url:"",
                                    datatype:"xml",
                                    template:"#name#",
                                    select:true
                                },
                                {   id:"customers",
								
                                    view:"list",
									url: source,
                                    template:"#Name#",
                                    select:true
                                },
								{ 	id:"customerdetail",
                                    view:"form", elements:[
                                        { view:"text", label:"Name", id:"Name"},
                                        { view:"text", label:"Phone",  id:"Phone"},
                                        { view:"text", label:"Contact", id:"Contact"}
                                       
                                    ]
                                }

                        ]
                    },
                    { 
                        view:"toolbar", 
                        id:"BottomBar", type:"BottomBar",
                        elements:[
                            { view:"tabbar", id:'tabbar', selected: 'home', multiview:true, inputWidth:300, options: [
                            	{ label: 'Home', src: 'images/tabbar/home.png', value: 'home'},
                            	{ label: 'Customers', src: 'images/tabbar/customers.png', value: 'customers'},
                            	{ label: 'Routes', src: 'images/tabbar/routes.png', value: 'routes'},
								{ label: 'Invoices', src: 'images/tabbar/invoices.png', value: 'invoices'}
                            	]
							}
                        ]
                    }    
    			]
		});
		

		var dp = new dhx.DataProcessor({
					master:$$('customers'),
					url: source
				});
				
		$$('customerdetail').bind($$('customers'));	

		$$("customers").attachEvent("onafterselect",function(id){
			$$("customerdetail").show();
		})

		dhx.extend($$('filter'),dhx.KeyEvents);
		$$('filter').attachEvent("onTimedKeyPress", function(){
			var text = $$("filter").getValue();
				
			$$("customers").filter("#Name#",text);
		});
	 });
	function showCustomers(){
	
		$$("customers").show();
	
	}
	</script>
	</body>
</html>
